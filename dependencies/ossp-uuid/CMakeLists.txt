MESSAGE( STATUS "Fetching ossp-uuid..." )

# TODO: determine those automatically?
SET( OSSP_UUID_SOURCE_DIR "${CMAKE_CURRENT_BINARY_DIR}/../../_deps/ossp-uuid-src" )
SET( OSSP_UUID_BINARY_DIR "${CMAKE_CURRENT_BINARY_DIR}/../../_deps/ossp-uuid-build" )

EXTERNALPROJECT_ADD( OSSP_UUID
	GIT_REPOSITORY https://github.com/sean-/ossp-uuid
	UPDATE_COMMAND ""
	SOURCE_DIR "${OSSP_UUID_SOURCE_DIR}"
	BINARY_DIR "${OSSP_UUID_BINARY_DIR}"
	BUILD_IN_SOURCE 0
	CONFIGURE_COMMAND "${OSSP_UUID_SOURCE_DIR}/configure"
	BUILD_COMMAND make
	INSTALL_COMMAND cp "${OSSP_UUID_BINARY_DIR}/.libs/libuuid.a" "${OSSP_UUID_BINARY_DIR}/libossp-uuid.a" # ugh
	)

SET( OSSP_UUID_INCLUDE_DIR "${OSSP_UUID_BINARY_DIR}" PARENT_SCOPE )
SET( OSSP_UUID_LINK_OPTIONS "-L${OSSP_UUID_BINARY_DIR}" PARENT_SCOPE )

ADD_DEPENDENCIES( GLSMAC OSSP_UUID )
